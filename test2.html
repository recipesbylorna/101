<!DOCTYPE html>
<html>
   <head>
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
   </head>
   <body>
      <script>
         var myJSON;
         var recipeIndex = 0;
         function incrementRecipe(incrementor) {
            recipeIndex += incrementor;
            recipeIndex = (((recipeIndex % myJSON.recipes.length) + myJSON.recipes.length) % myJSON.recipes.length);
            
            updateRecipe(recipeIndex);
         }
         function updateRecipe(recipeNum) {
            updateName(recipeNum);
            updateCategory(recipeNum);
            updateMainIng(recipeNum);
            updateYieldAmount(recipeNum);
            updateYieldType(recipeNum);
            updateNotes(recipeNum);
            updateIngredients(recipeNum);
            updateInstructions(recipeNum);
            checkEmpty();
         }   
         function updateName(recipeNum) {
            document.getElementById("name").innerHTML = myJSON.recipes[recipeNum].name;
         }
         function updateCategory(recipeNum) {
            document.getElementById("category").innerHTML = myJSON.recipes[recipeNum].category;
         }
         function updateMainIng(recipeNum) {
            document.getElementById("mainIng").innerHTML = myJSON.recipes[recipeNum].mainIng;
         }
         function updateYieldAmount(recipeNum) {
            yieldAmount = myJSON.recipes[recipeNum].yieldAmount;
            document.getElementById("yieldAmount").innerHTML = myJSON.recipes[recipeNum].yieldAmount;
         }
         function updateYieldType(recipeNum) {
            document.getElementById("yieldType").innerHTML = myJSON.recipes[recipeNum].yieldType;
         }
         function updateNotes(recipeNum) {
            document.getElementById("notes").innerHTML = myJSON.recipes[recipeNum].notes;
         }
         function updateIngredients(recipeNum) {
            let x = "";
            let quantity;
            let ingredient;
            let preparation;
            for (let i = 0; i < myJSON.recipes[recipeNum].ingredients.length; i++) {
               quantity = myJSON.recipes[recipeNum].ingredients[i].quantity;
               ingredient = myJSON.recipes[recipeNum].ingredients[i].ingredient;
               preparation = myJSON.recipes[recipeNum].ingredients[i].preparation;
               x += quantity + " " + ingredient;
               if (preparation.localeCompare("") != 0) {
                  x += " - " + preparation;
               }
               x += "<br>";
            }
            document.getElementById("ingredients").innerHTML = x;
         }
         function updateInstructions(recipeNum) {
            document.getElementById("instructions").innerHTML = myJSON.recipes[recipeNum].instructions;
         }
         function checkEmpty() {
            yieldAmount = myJSON.recipes[recipeNum].yieldAmount;
            if (yieldAmount.localeCompare("") != 0) {
               document.getElementById("yield").innerHTML = "";
            }
         $(document).ready(function(){
           $.getJSON("/101/OUTPUT.JSON?r="+(new Date).getTime(), function(inputJSON){
             myJSON = inputJSON;
             updateRecipe(recipeIndex);
           }).fail(function(){
           console.log("An error has occurred.");
          });
         });
      </script>
      <button type="button" onclick="incrementRecipe(-1)">Go Back One</button>
      <button type="button" onclick="incrementRecipe(1)">Go Forward One</button>
      <h1>Title: <span id="name"></span></h1>
      <h3>Category: <span id="category"></span></h3>
      <h3>Main Ingredient: <span id="mainIng"></span></h3>
      <span id="yield"><h3>Makes <span id="yieldAmount"></span> <span id="yieldType"></span></h3></span>
      <h2>Notes: <span id="notes"></span></h2>
      <h2>Ingredients:</h2>
      <h3><span id="ingredients"></span></h3>
      <h2>Instructions:</h2>
      <p><span id="instructions"></span></p>
   </body>
</html>
